import{createRequire as D}from"node:module";var W=Object.create;var{getPrototypeOf:M,defineProperty:V,getOwnPropertyNames:N}=Object;var O=Object.prototype.hasOwnProperty;var X=(R,P,E)=>{E=R!=null?W(M(R)):{};let j=P||!R||!R.__esModule?V(E,"default",{value:R,enumerable:!0}):E;for(let z of N(R))if(!O.call(j,z))V(j,z,{get:()=>R[z],enumerable:!0});return j};var Y=D(import.meta.url);function _(R){return new Promise((P)=>setTimeout(P,R))}var q=typeof globalThis!=="undefined"&&typeof globalThis.window!=="undefined"&&typeof globalThis.document!=="undefined",Q=typeof globalThis!=="undefined"&&typeof globalThis.process!=="undefined"&&globalThis.process?.versions?.node&&!q,I={black:"color: #000000",red:"color: #ff0000",green:"color: #008000",yellow:"color: #ffff00",blue:"color: #0000ff",magenta:"color: #ff00ff",cyan:"color: #00ffff",white:"color: #ffffff",gray:"color: #808080",grey:"color: #808080",redBright:"color: #ff5555",greenBright:"color: #55ff55",yellowBright:"color: #ffff55",blueBright:"color: #5555ff",magentaBright:"color: #ff55ff",cyanBright:"color: #55ffff",whiteBright:"color: #ffffff",bgBlack:"background-color: #000000; color: #ffffff",bgRed:"background-color: #ff0000; color: #ffffff",bgGreen:"background-color: #008000; color: #ffffff",bgYellow:"background-color: #ffff00; color: #000000",bgBlue:"background-color: #0000ff; color: #ffffff",bgMagenta:"background-color: #ff00ff; color: #ffffff",bgCyan:"background-color: #00ffff; color: #000000",bgWhite:"background-color: #ffffff; color: #000000",bgRedBright:"background-color: #ff5555; color: #ffffff; padding: 2px 4px; border-radius: 3px",bgGreenBright:"background-color: #55ff55; color: #000000; padding: 2px 4px; border-radius: 3px",bgYellowBright:"background-color: #ffff55; color: #000000; padding: 2px 4px; border-radius: 3px",bgBlueBright:"background-color: #5555ff; color: #ffffff; padding: 2px 4px; border-radius: 3px",bgMagentaBright:"background-color: #ff55ff; color: #ffffff; padding: 2px 4px; border-radius: 3px",bgCyanBright:"background-color: #55ffff; color: #000000; padding: 2px 4px; border-radius: 3px",bgWhiteBright:"background-color: #ffffff; color: #000000; padding: 2px 4px; border-radius: 3px",bold:"font-weight: bold",dim:"opacity: 0.5",italic:"font-style: italic",underline:"text-decoration: underline",strikethrough:"text-decoration: line-through"},J=null;async function w(){if(!J&&Q&&!q)try{J=(await import("chalk")).default}catch(R){if(Q)K("Failed to load chalk:",R)}return J}function Z(R=[],P){if(q){let E=R.map((j)=>I[j]).filter(Boolean).join("; ");return{text:P,styles:E||void 0}}else{if(J)return{text:R.reduce((j,z)=>{if(z in J)return J[z](j);return j},P)};return{text:P}}}function K(...R){try{if(typeof console!=="undefined"&&console&&typeof console.log==="function")console.log(...R)}catch(P){}}function U(R,P){if(q&&P&&P.length>0){let{text:E,styles:j}=Z(P,R);if(j)K(`%c${E}`,j);else K(E)}else if(!q&&J){let{text:E}=Z(P,R);K(E)}else K(R)}if(Q&&!q)w();var G=null,H=null;async function B(){if(Q&&!q&&!G)try{let[R,P]=await Promise.all([import("chalk"),import("ora")]);G=R.default,H=P.default}catch(R){if(Q&&!q)K("Failed to load Node.js modules:",R)}}if(Q&&!q)B();function $(R=[],P){if(q){let{text:E}=Z(R,P);return E}else if(G)return R.reduce((E,j)=>{if(j in G)return G[j](E);return E},P);return P}class A{_text=null;_textStyles=[];_detail=null;_detailStyles=[];_prefix=null;_prefixStyles=[];_data;_displayTime=!1;_loggerType="normal";_prependDivider=!1;_prependDividerStyles=[];_prependDividerLength=1;_prependDividerChar="-";_appendDivider=!1;_appendDividerStyles=[];_appendDividerChar="-";_appendDividerLength=1;_singleDivider=!1;_singleDividerStyles=[];_singleDividerChar="-";_singleDividerLength=1;_isVisible=!0;constructor(R){R&&(this._prefixStyles=R)}static stylesMap={info:["blueBright","underline"],warn:["bgYellowBright"],error:["bgRedBright"],debug:["bgCyanBright"],success:["bgGreenBright"],failure:["bgRedBright"],plain:["white"]};static getLoggerInstance(R,P){return P&&(A.stylesMap[R]=P),new this(A.stylesMap[R])}static type(R,P){if(R in A&&P)if(q)K(`%cLogger type "${String(R)}" is preset. Add custom getter will override the preset.`,"color: #ffff00; text-decoration: underline");else if(G)K(G.yellow.underline(`Logger type "${String(R)}" is preset. Add custom getter will override the preset.`));else K(`Logger type "${String(R)}" is preset. Add custom getter will override the preset.`);let E=A.getLoggerInstance(R,P);return Object.defineProperty(A,R,{get(){return E},configurable:!0,enumerable:!0}),E}static get stream(){return new v}toStream(R,P){let E=new v(R,P);if(this._text)E.text(this._text,this._textStyles);if(this._detail)E.detail(this._detail,this._detailStyles);if(this._data)E.data(this._data);return E}static get plain(){return this.getLoggerInstance("plain")}static get info(){return this.getLoggerInstance("info")}static get warn(){return this.getLoggerInstance("warn")}static get error(){return this.getLoggerInstance("error")}static get debug(){return this.getLoggerInstance("debug")}static get success(){return this.getLoggerInstance("success")}static get failure(){return this.getLoggerInstance("failure")}setDividerProperties(R,P="-",E=40,j=["gray"]){let z=R==="prepend"?"_prependDivider":R==="append"?"_appendDivider":"_singleDivider";this[`${z}`]=!0,this[`${z}Char`]=P||this[`${z}Char`],this[`${z}Styles`]=j||this[`${z}Styles`],this[`${z}Length`]=E||(P&&P.length===1?40:this[`${z}Length`])}divider(R,P,E){this.setDividerProperties("single",R,P,E),this.print()}styles(R){return this._textStyles=R,this}prependDivider(R,P,E){return this.setDividerProperties("prepend",R,P,E),this}appendDivider(R,P,E){return this.setDividerProperties("append",R,P,E),this}time(R=!0){return this._displayTime=R,this}get formattedTime(){return this._displayTime?`${new Date().toLocaleTimeString()} `:""}text(R,P){return this._text=R,P&&(this._textStyles=P),this}get formattedText(){return this._text?`${this.decorateText(this._text,this._textStyles)} `:""}detail(R,P){return this._detail=R,P&&(this._detailStyles=P),this}get formattedDetail(){return this._detail?`
${this.decorateText(this._detail,this._detailStyles)}`:""}prefix(R,P){return this._prefix=R,P&&(this._prefixStyles=P),this}get formattedPrefix(){return this._prefix?`${this.decorateText(this._prefix,this._prefixStyles)} `:""}data(R){return this._data=R,this}get formattedData(){return this._data?`
${this._data}`:""}decorateText(R,P){let E=R||"";if(E)if(q)E=E.replace(/\[\[(.+?)\]\]/g,"$1");else if(G)E=E.replace(/\[\[(.+?)\]\]/g,G.underline.yellow("$1"));else E=E.replace(/\[\[(.+?)\]\]/g,"$1");return $(P,E)}composeMainOutput(){if(this.formattedTime||this.formattedText||this.formattedDetail||this.formattedData||this._loggerType==="normal"&&this.formattedPrefix)return`${this.formattedTime}${this._loggerType==="normal"?this.formattedPrefix:""}${this.formattedText}${this.formattedDetail}${this.formattedData}`;return""}print(R=!0){if(this._isVisible=R,!this._isVisible)return;if(this._singleDivider){let E=this._singleDividerChar.repeat(this._singleDividerLength);if(q)U(E,this._singleDividerStyles);else K($(this._singleDividerStyles,E));return}if(this._prependDivider){let E=this._prependDividerChar.repeat(this._prependDividerLength);if(q)U(E,this._prependDividerStyles);else K($(this._prependDividerStyles,E))}let P=this.composeMainOutput();if(q)this.printBrowserOutput(P);else K(P);if(this._appendDivider){let E=this._appendDividerChar.repeat(this._appendDividerLength);if(q)U(E,this._appendDividerStyles);else K($(this._appendDividerStyles,E))}}printBrowserOutput(R){if(!R)return;let P=R.includes("[[")&&R.includes("]]"),E=R.match(/^\d{1,2}:\d{2}:\d{2}(?:\s[AP]M)?\s/);if(P||E||this._prefixStyles.length>0||this._textStyles.length>0){let j=R;if(E&&this._displayTime)K(`%c${E[0]}`,"color: #888; font-size: 0.9em"),j=j.substring(E[0].length);if(this._prefix&&this._loggerType==="normal")U(`${this._prefix} `,this._prefixStyles),j=j.replace(`${this._prefix} `,"");if(P)j.split(/(\[\[.+?\]\])/).forEach((F)=>{if(F.match(/\[\[.+?\]\]/)){let b=F.replace(/\[\[(.+?)\]\]/g,"$1");K(`%c${b}`,"text-decoration: underline; color: #ffff00; font-weight: bold")}else if(F.trim())U(F,this._textStyles)});else U(j,this._textStyles)}else K(R)}capitalize(R){return R.charAt(0).toUpperCase()+R.slice(1)}get[Symbol.toStringTag](){return"ShermanLoggerClass"}toString(){return this.composeMainOutput().toString()}toObject(){return this}}class v extends A{_state=void 0;_spinner=void 0;_delay=0;constructor(R,P){super(P||[]);if(this._loggerType="stream",q)this._spinner=void 0,K("%c[STREAM STARTED]","color: #00ff00; font-weight: bold");else if(H)this._spinner=H(),this._spinner?.start();else this._spinner=void 0,K("[STREAM STARTED]");return this._state="start",R&&this.prefix(R,P),this}prefix(R,P){if(this._prefix=R,P&&(this._prefixStyles=P),this._spinner)this._spinner.prefixText=this.decorateText(this._prefix,this._prefixStyles);else if(q)K(`%c[PREFIX SET: ${R}]`,"color: #888; font-style: italic;");return this}text(R="",P){return this._text=R,P&&(this._textStyles=P),this}detail(R="",P){return this._detail=R,P&&(this._detailStyles=P),this}delay(R){return this._delay=R,this}state(R){return this._state=R,this}update(){if(this._state)this.updateState(this._state);else if(this._spinner)this._spinner.text=this.composeMainOutput();else if(q){let R=this.composeMainOutput();if(R)K(`%c[STREAM UPDATE] ${R}`,"color: #00aaff")}}async asyncUpdate(R){this.update();let P=this._delay||R;if(P)await _(P),this._delay&&(this._delay=0)}updateState(R){let P=this.composeMainOutput();if(this._spinner)switch(R){case"start":this._spinner.start(P);break;case"stop":this._spinner.stop(),this._spinner=void 0;break;case"succeed":this._spinner.succeed(P),this._spinner=void 0;break;case"fail":this._spinner.fail(P),this._spinner=void 0;break}else if(q)switch(R){case"start":K(`%c[STREAM STARTED] ${P}`,"color: #00ff00; font-weight: bold");break;case"stop":K(`%c[STREAM STOPPED] ${P}`,"color: #ff8800; font-weight: bold");break;case"succeed":K(`%c✓ [STREAM SUCCESS] ${P}`,"color: #00ff00; font-weight: bold");break;case"fail":K(`%c✗ [STREAM FAILED] ${P}`,"color: #ff0000; font-weight: bold");break}else switch(R){case"start":K(`[STREAM STARTED] ${P}`);break;case"stop":K(`[STREAM STOPPED] ${P}`);break;case"succeed":K(`✓ [STREAM SUCCESS] ${P}`);break;case"fail":K(`✗ [STREAM FAILED] ${P}`);break}this._state=void 0}}var T=new Proxy(A,{get(R,P,E){if(!(P in R))return function(...j){let[z,F]=[P,j[0]];if(F&&typeof F==="object")return A.type(z,F),A.getLoggerInstance(z,F);else throw new TypeError("Invalid arguments for adding a new logger getter.")};return Reflect.get(R,P,E)}});function m(){return T}function k(R){return A.plain.text(R)}var L=new Proxy(k,{get:(R,P)=>{if(Reflect.ownKeys(A).includes(P))return T[P];return Reflect.get(R,P)}});export{L as logger,m as createLogger,v as StreamLogger,A as Logger};
