import{createRequire as B}from"node:module";var O=Object.create;var{getPrototypeOf:v,defineProperty:D,getOwnPropertyNames:w}=Object;var N=Object.prototype.hasOwnProperty;var V=(R,K,q)=>{q=R!=null?O(v(R)):{};let z=K||!R||!R.__esModule?D(q,"default",{value:R,enumerable:!0}):q;for(let F of w(R))if(!N.call(z,F))D(z,F,{get:()=>R[F],enumerable:!0});return z};var _=B(import.meta.url);var J=typeof globalThis!=="undefined"&&typeof globalThis.window!=="undefined"&&typeof globalThis.document!=="undefined",Z=typeof globalThis!=="undefined"&&typeof globalThis.process!=="undefined"&&globalThis.process?.versions?.node&&!J,k={black:"color: #000000",red:"color: #ff0000",green:"color: #008000",yellow:"color: #ffff00",blue:"color: #0000ff",magenta:"color: #ff00ff",cyan:"color: #00ffff",white:"color: #ffffff",gray:"color: #808080",grey:"color: #808080",redBright:"color: #ff5555",greenBright:"color: #55ff55",yellowBright:"color: #ffff55",blueBright:"color: #5555ff",magentaBright:"color: #ff55ff",cyanBright:"color: #55ffff",whiteBright:"color: #ffffff",bgBlack:"background-color: #000000; color: #ffffff",bgRed:"background-color: #ff0000; color: #ffffff",bgGreen:"background-color: #008000; color: #ffffff",bgYellow:"background-color: #ffff00; color: #000000",bgBlue:"background-color: #0000ff; color: #ffffff",bgMagenta:"background-color: #ff00ff; color: #ffffff",bgCyan:"background-color: #00ffff; color: #000000",bgWhite:"background-color: #ffffff; color: #000000",bgRedBright:"background-color: #ff5555; color: #ffffff; padding: 2px 4px; border-radius: 3px",bgGreenBright:"background-color: #55ff55; color: #000000; padding: 2px 4px; border-radius: 3px",bgYellowBright:"background-color: #ffff55; color: #000000; padding: 2px 4px; border-radius: 3px",bgBlueBright:"background-color: #5555ff; color: #ffffff; padding: 2px 4px; border-radius: 3px",bgMagentaBright:"background-color: #ff55ff; color: #ffffff; padding: 2px 4px; border-radius: 3px",bgCyanBright:"background-color: #55ffff; color: #000000; padding: 2px 4px; border-radius: 3px",bgWhiteBright:"background-color: #ffffff; color: #000000; padding: 2px 4px; border-radius: 3px",bold:"font-weight: bold",dim:"opacity: 0.5",italic:"font-style: italic",underline:"text-decoration: underline",strikethrough:"text-decoration: line-through"},$=null;async function m(){if(!$&&Z&&!J)try{$=(await import("chalk")).default}catch(R){if(Z)E("Failed to load chalk:",R)}return $}function j(R=[],K){if(J){let q=R.map((z)=>k[z]).filter(Boolean).join("; ");return{text:K,styles:q||void 0}}else{if($)return{text:R.reduce((z,F)=>{if(F in $)return $[F](z);return z},K)};return{text:K}}}function E(...R){try{if(typeof console!=="undefined"&&console&&typeof console.log==="function")console.log(...R)}catch(K){}}function b(R,K){if(J&&K&&K.length>0){let{text:q,styles:z}=j(K,R);if(z)E(`%c${q}`,z);else E(q)}else if(!J&&$){let{text:q}=j(K,R);E(q)}else E(R)}if(Z&&!J)m();function I(R){return new Promise((K)=>setTimeout(K,R))}var X={getUserAgent(){try{let R=X.safeNavigatorProperty("userAgent");return R&&typeof R==="string"?R:"Unknown UserAgent"}catch{return"Unknown UserAgent"}},hasStorageAPI(){try{let R=X.safeNavigatorProperty("storage");return R!==null&&typeof R==="object"&&typeof R.estimate==="function"}catch{return!1}},async getStorageEstimate(){try{if(X.hasStorageAPI()){let R=X.safeNavigatorProperty("storage");if(R&&typeof R.estimate==="function")return await R.estimate()}return null}catch{return null}},isAvailable(){try{return typeof navigator!=="undefined"&&navigator!==null}catch{return!1}},safeNavigatorProperty(R){try{if(!X.isAvailable())return null;if(Object.prototype.hasOwnProperty.call(navigator,R))return navigator[R];return null}catch{return null}},getEnhancedUserAgent(){try{return X.getUserAgent()}catch{return X.getUserAgent()}},isMobile(){try{let R=X.getUserAgent();if(R==="Unknown UserAgent")return!1;return/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Windows Phone/i.test(R)}catch{return!1}},getEnvironmentInfo(){return{isNavigatorAvailable:X.isAvailable(),hasStorageAPI:X.hasStorageAPI(),isMobile:X.isMobile(),userAgent:X.getEnhancedUserAgent()}}};var Y=null,T=null;async function L(){if(Z&&!J&&!Y)try{let[R,K]=await Promise.all([import("chalk"),import("ora")]);Y=R.default,T=K.default}catch(R){if(Z&&!J)E("Failed to load Node.js modules:",R)}}if(Z&&!J)L();function A(R=[],K){if(J){let{text:q}=j(R,K);return q}else if(Y)return R.reduce((q,z)=>{if(z in Y)return Y[z](q);return q},K);return K}class Q{_text=null;_textStyles=[];_detail=null;_detailStyles=[];_prefix=null;_prefixStyles=[];_data;_displayTime=!1;_loggerType="normal";_prependDivider=!1;_prependDividerStyles=[];_prependDividerLength=1;_prependDividerChar="-";_appendDivider=!1;_appendDividerStyles=[];_appendDividerChar="-";_appendDividerLength=1;_singleDivider=!1;_singleDividerStyles=[];_singleDividerChar="-";_singleDividerLength=1;_isVisible=!0;constructor(R){R&&(this._prefixStyles=R)}static stylesMap={info:["blueBright","underline"],warn:["bgYellowBright"],error:["bgRedBright"],debug:["bgCyanBright"],success:["bgGreenBright"],failure:["bgRedBright"],plain:["white"]};static getLoggerInstance(R,K){return K&&(Q.stylesMap[R]=K),new this(Q.stylesMap[R])}static type(R,K){if(R in Q&&K)if(J)E(`%cLogger type "${String(R)}" is preset. Add custom getter will override the preset.`,"color: #ffff00; text-decoration: underline");else if(Y)E(Y.yellow.underline(`Logger type "${String(R)}" is preset. Add custom getter will override the preset.`));else E(`Logger type "${String(R)}" is preset. Add custom getter will override the preset.`);let q=Q.getLoggerInstance(R,K);return Object.defineProperty(Q,R,{get(){return q},configurable:!0,enumerable:!0}),q}static get stream(){return new P}toStream(R,K){let q=new P(R,K);if(this._text)q.text(this._text,this._textStyles);if(this._detail)q.detail(this._detail,this._detailStyles);if(this._data)q.data(this._data);return q}static get plain(){return this.getLoggerInstance("plain")}static get info(){return this.getLoggerInstance("info")}static get warn(){return this.getLoggerInstance("warn")}static get error(){return this.getLoggerInstance("error")}static get debug(){return this.getLoggerInstance("debug")}static get success(){return this.getLoggerInstance("success")}static get failure(){return this.getLoggerInstance("failure")}setDividerProperties(R,K="-",q=40,z=["gray"]){let F=R==="prepend"?"_prependDivider":R==="append"?"_appendDivider":"_singleDivider";this[`${F}`]=!0,this[`${F}Char`]=K||this[`${F}Char`],this[`${F}Styles`]=z||this[`${F}Styles`],this[`${F}Length`]=q||(K&&K.length===1?40:this[`${F}Length`])}divider(R,K,q){this.setDividerProperties("single",R,K,q),this.print()}styles(R){return this._textStyles=R,this}prependDivider(R,K,q){return this.setDividerProperties("prepend",R,K,q),this}appendDivider(R,K,q){return this.setDividerProperties("append",R,K,q),this}time(R=!0){return this._displayTime=R,this}get formattedTime(){return this._displayTime?`${new Date().toLocaleTimeString()} `:""}text(R,K){return this._text=R,K&&(this._textStyles=K),this}get formattedText(){return this._text?`${this.decorateText(this._text,this._textStyles)} `:""}detail(R,K){return this._detail=R,K&&(this._detailStyles=K),this}get formattedDetail(){return this._detail?`
${this.decorateText(this._detail,this._detailStyles)}`:""}prefix(R,K){return this._prefix=R,K&&(this._prefixStyles=K),this}get formattedPrefix(){return this._prefix?`${this.decorateText(this._prefix,this._prefixStyles)} `:""}data(R){return this._data=R,this}get formattedData(){return this._data?`
${this._data}`:""}decorateText(R,K){let q=R||"";if(q)if(J)q=q.replace(/\[\[(.+?)\]\]/g,"$1");else if(Y)q=q.replace(/\[\[(.+?)\]\]/g,Y.underline.yellow("$1"));else q=q.replace(/\[\[(.+?)\]\]/g,"$1");return A(K,q)}composeMainOutput(){if(this.formattedTime||this.formattedText||this.formattedDetail||this.formattedData||this._loggerType==="normal"&&this.formattedPrefix)return`${this.formattedTime}${this._loggerType==="normal"?this.formattedPrefix:""}${this.formattedText}${this.formattedDetail}${this.formattedData}`;return""}print(R=!0){if(this._isVisible=R,!this._isVisible)return;if(this._singleDivider){let q=this._singleDividerChar.repeat(this._singleDividerLength);if(J)b(q,this._singleDividerStyles);else E(A(this._singleDividerStyles,q));return}if(this._prependDivider){let q=this._prependDividerChar.repeat(this._prependDividerLength);if(J)b(q,this._prependDividerStyles);else E(A(this._prependDividerStyles,q))}let K=this.composeMainOutput();if(J)this.printBrowserOutput(K);else E(K);if(this._appendDivider){let q=this._appendDividerChar.repeat(this._appendDividerLength);if(J)b(q,this._appendDividerStyles);else E(A(this._appendDividerStyles,q))}}printBrowserOutput(R){if(!R)return;let K=R.includes("[[")&&R.includes("]]"),q=R.match(/^\d{1,2}:\d{2}:\d{2}(?:\s[AP]M)?\s/);if(K||q||this._prefixStyles.length>0||this._textStyles.length>0){let z=[],F=[],U=R;if(q&&this._displayTime)z.push(`%c${q[0]}`),F.push("color: #888; font-size: 0.9em"),U=U.substring(q[0].length);if(this._prefix&&this._loggerType==="normal"){let{styles:G}=j(this._prefixStyles,`${this._prefix} `);if(G)z.push(`%c${this._prefix} `),F.push(G);else z.push(`${this._prefix} `);U=U.replace(`${this._prefix} `,"")}if(K)U.split(/(\[\[.+?\]\])/).forEach((H)=>{if(H.match(/\[\[.+?\]\]/)){let W=H.replace(/\[\[(.+?)\]\]/g,"$1");z.push(`%c${W}`),F.push("text-decoration: underline; color: #ffff00; font-weight: bold")}else if(H.trim()){let{styles:W}=j(this._textStyles,H);if(W)z.push(`%c${H}`),F.push(W);else z.push(H)}});else if(U){let{styles:G}=j(this._textStyles,U);if(G)z.push(`%c${U}`),F.push(G);else z.push(U)}if(z.length>0)E(z.join(""),...F)}else E(R)}capitalize(R){return R.charAt(0).toUpperCase()+R.slice(1)}get[Symbol.toStringTag](){return"ShermanLoggerClass"}toString(){return this.composeMainOutput().toString()}toObject(){return this}}class P extends Q{_state=void 0;_spinner=void 0;_delay=0;constructor(R,K){super(K||[]);if(this._loggerType="stream",J)this._spinner=void 0,E("%c[STREAM STARTED]","color: #00ff00; font-weight: bold");else if(T)this._spinner=T(),this._spinner?.start();else this._spinner=void 0,E("[STREAM STARTED]");return this._state="start",R&&this.prefix(R,K),this}prefix(R,K){if(this._prefix=R,K&&(this._prefixStyles=K),this._spinner)this._spinner.prefixText=this.decorateText(this._prefix,this._prefixStyles);else if(J)E(`%c[PREFIX SET: ${R}]`,"color: #888; font-style: italic;");return this}text(R="",K){return this._text=R,K&&(this._textStyles=K),this}detail(R="",K){return this._detail=R,K&&(this._detailStyles=K),this}delay(R){return this._delay=R,this}state(R){return this._state=R,this}update(){if(this._state)this.updateState(this._state);else if(this._spinner)this._spinner.text=this.composeMainOutput();else if(J){let R=this.composeMainOutput();if(R)E(`%c[STREAM UPDATE] ${R}`,"color: #00aaff")}}async asyncUpdate(R){this.update();let K=this._delay||R;if(K)await I(K),this._delay&&(this._delay=0)}updateState(R){let K=this.composeMainOutput();if(this._spinner)switch(R){case"start":this._spinner.start(K);break;case"stop":this._spinner.stop(),this._spinner=void 0;break;case"succeed":this._spinner.succeed(K),this._spinner=void 0;break;case"fail":this._spinner.fail(K),this._spinner=void 0;break}else if(J)switch(R){case"start":E(`%c[STREAM STARTED] ${K}`,"color: #00ff00; font-weight: bold");break;case"stop":E(`%c[STREAM STOPPED] ${K}`,"color: #ff8800; font-weight: bold");break;case"succeed":E(`%c✓ [STREAM SUCCESS] ${K}`,"color: #00ff00; font-weight: bold");break;case"fail":E(`%c✗ [STREAM FAILED] ${K}`,"color: #ff0000; font-weight: bold");break}else switch(R){case"start":E(`[STREAM STARTED] ${K}`);break;case"stop":E(`[STREAM STOPPED] ${K}`);break;case"succeed":E(`✓ [STREAM SUCCESS] ${K}`);break;case"fail":E(`✗ [STREAM FAILED] ${K}`);break}this._state=void 0}}var M=new Proxy(Q,{get(R,K,q){if(!(K in R))return function(...z){let[F,U]=[K,z[0]];if(U&&typeof U==="object")return Q.type(F,U),Q.getLoggerInstance(F,U);else throw new TypeError("Invalid arguments for adding a new logger getter.")};return Reflect.get(R,K,q)}});function d(){return M}function S(R){return Q.plain.text(R)}var C=new Proxy(S,{get:(R,K)=>{if(Reflect.ownKeys(Q).includes(K))return M[K];return Reflect.get(R,K)}});export{X as safeNavigator,C as logger,Z as isNode,J as isBrowser,d as createLogger,P as StreamLogger,Q as Logger};
