import{createRequire as L}from"node:module";var h=Object.create;var{getPrototypeOf:d,defineProperty:w,getOwnPropertyNames:S}=Object;var m=Object.prototype.hasOwnProperty;var I=(q,z,J)=>{J=q!=null?h(d(q)):{};let Q=z||!q||!q.__esModule?w(J,"default",{value:q,enumerable:!0}):J;for(let W of S(q))if(!m.call(Q,W))w(Q,W,{get:()=>q[W],enumerable:!0});return Q};var D=L(import.meta.url);var _=typeof globalThis!=="undefined"&&typeof globalThis.window!=="undefined"&&typeof globalThis.document!=="undefined",j=typeof globalThis!=="undefined"&&typeof globalThis.process!=="undefined"&&globalThis.process?.versions?.node&&!_;function N(q){return new Promise((z)=>setTimeout(z,q))}function X(...q){try{if(typeof console!=="undefined"&&console&&typeof console.log==="function")console.log(...q)}catch(z){}}var k=null;async function x(){if(typeof process!=="undefined"&&!0&&!k&&j&&!_)try{k=(await import("chalk")).default}catch(q){if(j)X("Failed to load chalk:",q)}return k}if(j&&!_)x();var R={getUserAgent(){try{let q=R.safeNavigatorProperty("userAgent");return q&&typeof q==="string"?q:"Unknown UserAgent"}catch{return"Unknown UserAgent"}},hasStorageAPI(){try{let q=R.safeNavigatorProperty("storage");return q!==null&&typeof q==="object"&&typeof q.estimate==="function"}catch{return!1}},async getStorageEstimate(){try{if(R.hasStorageAPI()){let q=R.safeNavigatorProperty("storage");if(q&&typeof q.estimate==="function")return await q.estimate()}return null}catch{return null}},isAvailable(){try{return typeof navigator!=="undefined"&&navigator!==null}catch{return!1}},safeNavigatorProperty(q){try{if(!R.isAvailable())return null;if(Object.prototype.hasOwnProperty.call(navigator,q))return navigator[q];return null}catch{return null}},getEnhancedUserAgent(){try{return R.getUserAgent()}catch{return R.getUserAgent()}},isMobile(){try{let q=R.getUserAgent();if(q==="Unknown UserAgent")return!1;return/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Windows Phone/i.test(q)}catch{return!1}},getEnvironmentInfo(){return{isNavigatorAvailable:R.isAvailable(),hasStorageAPI:R.hasStorageAPI(),isMobile:R.isMobile(),userAgent:R.getEnhancedUserAgent()}}};class H{static[Symbol.hasInstance]=(q)=>{return q&&typeof q==="object"&&q._isShermanLogger===!0};static registeredTypes=[];_text=null;_textStyles=[];_detail=null;_detailStyles=[];_prefix=null;_prefixStyles=[];_data;_displayTime=!1;_loggerType="normal";_prependDivider=!1;_prependDividerStyles=[];_prependDividerLength=1;_prependDividerChar="-";_appendDivider=!1;_appendDividerStyles=[];_appendDividerChar="-";_appendDividerLength=1;_singleDivider=!1;_singleDividerStyles=[];_singleDividerChar="-";_singleDividerLength=1;_isVisible=!0;constructor(q){q&&(this._prefixStyles=q),this._isShermanLogger=!0}static stylesMap={info:["blueBright","underline"],warn:["bgYellowBright"],error:["bgRedBright"],debug:["bgCyanBright"],success:["bgGreenBright"],failure:["bgRedBright"],plain:["white"]};setDividerProperties(q,z="-",J=40,Q=["gray"]){let W=q==="prepend"?"_prependDivider":q==="append"?"_appendDivider":"_singleDivider";this[`${W}`]=!0,this[`${W}Char`]=z||this[`${W}Char`],this[`${W}Styles`]=Q||this[`${W}Styles`],this[`${W}Length`]=J||(z&&z.length===1?40:this[`${W}Length`])}divider(q,z,J){this.setDividerProperties("single",q,z,J),this.print()}styles(q){return this._textStyles=q,this}prependDivider(q,z,J){return this.setDividerProperties("prepend",q,z,J),this}appendDivider(q,z,J){return this.setDividerProperties("append",q,z,J),this}time(q=!0){return this._displayTime=q,this}get formattedTime(){return this._displayTime?`${new Date().toLocaleTimeString()} `:""}text(q,z){return this._text=q,z&&(this._textStyles=z),this}get formattedText(){return this._text?`${this.decorateText(this._text,this._textStyles)} `:""}detail(q,z){return this._detail=q,z&&(this._detailStyles=z),this}get formattedDetail(){return this._detail?`
${this.decorateText(this._detail,this._detailStyles)}`:""}prefix(q,z){return this._prefix=q,z&&(this._prefixStyles=z),this}get formattedPrefix(){return this._prefix?`${this.decorateText(this._prefix,this._prefixStyles)} `:""}data(q){return this._data=q,this}get formattedData(){return this._data?`
${this._data}`:""}composeMainOutput(){if(this.formattedTime||this.formattedText||this.formattedDetail||this.formattedData||this._loggerType==="normal"&&this.formattedPrefix)return`${this.formattedTime}${this._loggerType==="normal"?this.formattedPrefix:""}${this.formattedText}${this.formattedDetail}${this.formattedData}`;return""}print(q=!0){if(this._isVisible=q,!this._isVisible)return;if(this._singleDivider){let J=this._singleDividerChar.repeat(this._singleDividerLength);this.printDivider(J,this._singleDividerStyles);return}if(this._prependDivider){let J=this._prependDividerChar.repeat(this._prependDividerLength);this.printDivider(J,this._prependDividerStyles)}let z=this.composeMainOutput();if(z)this.printOutput(z);if(this._appendDivider){let J=this._appendDividerChar.repeat(this._appendDividerLength);this.printDivider(J,this._appendDividerStyles)}}capitalize(q){return q.charAt(0).toUpperCase()+q.slice(1)}get[Symbol.toStringTag](){return"ShermanLoggerClass"}toString(){return this.composeMainOutput().toString()}toObject(){return this}}class b extends H{_state=void 0;_delay=0;constructor(q,z){super(z||[]);this._loggerType="stream",this._state="start",q&&this.prefix(q,z)}text(q="",z){return this._text=q,z&&(this._textStyles=z),this}detail(q="",z){return this._detail=q,z&&(this._detailStyles=z),this}delay(q){return this._delay=q,this}state(q){return this._state=q,this.update(),this}update(){if(this._state)this.updateState(this._state);else{let q=this.composeMainOutput();this.updateStream(q)}}async asyncUpdate(q){this.update();let z=this._delay||q;if(z)await N(z),this._delay&&(this._delay=0)}updateState(q){let z=this.composeMainOutput();this.finalizeStream(q,z),this._state=void 0}}var G=null,B=null;async function f(){if(!G)try{let[q,z]=await Promise.all([import("chalk"),import("ora")]);G=q.default,B=z.default}catch(q){X("Failed to load Node.js modules:",q)}}f();class $ extends H{constructor(q){super(q)}static getLoggerInstance(q,z){return z&&($.stylesMap[q]=z),new this($.stylesMap[q])}static type(q,z){if(q in $&&z)if(G)X(G.yellow.underline(`Logger type "${String(q)}" is preset. Add custom getter will override the preset.`));else X(`Logger type "${String(q)}" is preset. Add custom getter will override the preset.`);if(z){if($.stylesMap[q]=z,!$.registeredTypes.includes(String(q)))$.registeredTypes.push(String(q))}let J=$.getLoggerInstance(q,z);return Object.defineProperty($,q,{get(){return J},configurable:!0,enumerable:!0}),J}static get stream(){return new A}static get plain(){return this.getLoggerInstance("plain")}static get info(){return this.getLoggerInstance("info")}static get warn(){return this.getLoggerInstance("warn")}static get error(){return this.getLoggerInstance("error")}static get debug(){return this.getLoggerInstance("debug")}static get success(){return this.getLoggerInstance("success")}static get failure(){return this.getLoggerInstance("failure")}decorateText(q,z){let J=q||"";if(J)if(G)J=J.replace(/\[\[(.+?)\]\]/g,G.underline.yellow("$1"));else J=J.replace(/\[\[(.+?)\]\]/g,"$1");return this.getStyledChalkInstance(z,J)}printOutput(q){X(q)}printDivider(q,z){X(this.getStyledChalkInstance(z,q))}toStream(q,z){let J=new A(q,z);if(this._text)J.text(this._text,this._textStyles);if(this._detail)J.detail(this._detail,this._detailStyles);if(this._data)J.data(this._data);return J}getStyledChalkInstance(q=[],z){if(G)return q.reduce((J,Q)=>{if(Q in G)return G[Q](J);return J},z);return z}}class A extends b{_spinner=void 0;constructor(q,z){super(q,z);this.initializeStream()}initializeStream(){if(B)this._spinner=B(),this._spinner?.start();else this._spinner=void 0,X("[STREAM STARTED]")}updateStream(q){if(this._spinner)this._spinner.text=q;else X(`[STREAM UPDATE] ${q||"[STREAM UPDATE]"}`)}finalizeStream(q,z){if(this._spinner)switch(q){case"start":this._spinner.start(z);break;case"stop":this._spinner.stop(),this._spinner=void 0;break;case"succeed":this._spinner.succeed(z),this._spinner=void 0;break;case"fail":this._spinner.fail(z),this._spinner=void 0;break}else switch(q){case"start":X(`[STREAM STARTED] ${z}`);break;case"stop":X(`[STREAM STOPPED] ${z}`);break;case"succeed":X(`✓ [STREAM SUCCESS] ${z}`);break;case"fail":X(`✗ [STREAM FAILED] ${z}`);break}}prefix(q,z){if(this._prefix=q,z&&(this._prefixStyles=z),this._spinner)this._spinner.prefixText=this.decorateText(this._prefix,this._prefixStyles);return this}decorateText(q,z){let J=q||"";if(J)if(G)J=J.replace(/\[\[(.+?)\]\]/g,G.underline.yellow("$1"));else J=J.replace(/\[\[(.+?)\]\]/g,"$1");return this.getStyledChalkInstance(z,J)}printOutput(q){X(q)}printDivider(q,z){X(this.getStyledChalkInstance(z,q))}toStream(q,z){if(q||z)return new A(q,z);return this}getStyledChalkInstance(q=[],z){if(G)return q.reduce((J,Q)=>{if(Q in G)return G[Q](J);return J},z);return z}}var v={black:"color: #000000",red:"color: #ff0000",green:"color: #008000",yellow:"color: #ffff00",blue:"color: #0000ff",magenta:"color: #ff00ff",cyan:"color: #00ffff",white:"color: #ffffff",gray:"color: #808080",grey:"color: #808080",redBright:"color: #ff5555",greenBright:"color: #55ff55",yellowBright:"color: #ffff55",blueBright:"color: #5555ff",magentaBright:"color: #ff55ff",cyanBright:"color: #55ffff",whiteBright:"color: #ffffff",bgBlack:"background-color: #000000; color: #ffffff",bgRed:"background-color: #ff0000; color: #ffffff",bgGreen:"background-color: #008000; color: #ffffff",bgYellow:"background-color: #ffff00; color: #000000",bgBlue:"background-color: #0000ff; color: #ffffff",bgMagenta:"background-color: #ff00ff; color: #ffffff",bgCyan:"background-color: #00ffff; color: #000000",bgWhite:"background-color: #ffffff; color: #000000",bgRedBright:"background-color: #ff5555; color: #ffffff; padding: 2px 4px; border-radius: 3px",bgGreenBright:"background-color: #55ff55; color: #000000; padding: 2px 4px; border-radius: 3px",bgYellowBright:"background-color: #ffff55; color: #000000; padding: 2px 4px; border-radius: 3px",bgBlueBright:"background-color: #5555ff; color: #ffffff; padding: 2px 4px; border-radius: 3px",bgMagentaBright:"background-color: #ff55ff; color: #ffffff; padding: 2px 4px; border-radius: 3px",bgCyanBright:"background-color: #55ffff; color: #000000; padding: 2px 4px; border-radius: 3px",bgWhiteBright:"background-color: #ffffff; color: #000000; padding: 2px 4px; border-radius: 3px",bold:"font-weight: bold",dim:"opacity: 0.5",italic:"font-style: italic",underline:"text-decoration: underline",strikethrough:"text-decoration: line-through"};class V extends H{constructor(q){super(q)}static getLoggerInstance(q,z){return z&&(V.stylesMap[q]=z),new this(V.stylesMap[q])}static type(q,z){if(q in V&&z)X(`%cLogger type "${String(q)}" is preset. Add custom getter will override the preset.`,"color: #ffff00; text-decoration: underline");if(z){if(V.stylesMap[q]=z,!V.registeredTypes.includes(String(q)))V.registeredTypes.push(String(q))}let J=V.getLoggerInstance(q,z);return Object.defineProperty(V,q,{get(){return J},configurable:!0,enumerable:!0}),J}static get stream(){return new M}static get plain(){return this.getLoggerInstance("plain")}static get info(){return this.getLoggerInstance("info")}static get warn(){return this.getLoggerInstance("warn")}static get error(){return this.getLoggerInstance("error")}static get debug(){return this.getLoggerInstance("debug")}static get success(){return this.getLoggerInstance("success")}static get failure(){return this.getLoggerInstance("failure")}toStream(q,z){let J=new M(q,z);if(this._text)J.text(this._text,this._textStyles);if(this._detail)J.detail(this._detail,this._detailStyles);if(this._data)J.data(this._data);return J}decorateText(q,z){let J=q||"";if(J)J=J.replace(/\[\[(.+?)\]\]/g,"$1");return this.getStyledText(z,J).text}printOutput(q){if(!q)return;let z=q.includes("[[")&&q.includes("]]"),J=q.match(/^\d{1,2}:\d{2}:\d{2}(?:\s[AP]M)?\s/);if(z||J||this._prefixStyles.length>0||this._textStyles.length>0){let Q=[],W=[],Y=q;if(J&&this._displayTime)Q.push(`%c${J[0]}`),W.push("color: #888; font-size: 0.9em"),Y=Y.substring(J[0].length);if(this._prefix&&this._loggerType==="normal"){let{styles:U}=this.getStyledText(this._prefixStyles,`${this._prefix} `);if(U)Q.push(`%c${this._prefix} `),W.push(U);else Q.push(`${this._prefix} `);Y=Y.replace(`${this._prefix} `,"")}if(z)Y.split(/(\[\[.+?\]\])/).forEach((K)=>{if(K.match(/\[\[.+?\]\]/)){let T=K.replace(/\[\[(.+?)\]\]/g,"$1");Q.push(`%c${T}`),W.push("text-decoration: underline; color: #ffff00; font-weight: bold")}else if(K.trim()){let{styles:T}=this.getStyledText(this._textStyles,K);if(T)Q.push(`%c${K}`),W.push(T);else Q.push(K)}});else if(Y){let{styles:U}=this.getStyledText(this._textStyles,Y);if(U)Q.push(`%c${Y}`),W.push(U);else Q.push(Y)}if(Q.length>0)X(Q.join(""),...W)}else X(q)}printDivider(q,z){let{styles:J}=this.getStyledText(z,q);if(J)X(`%c${q}`,J);else X(q)}getStyledText(q=[],z){let J=q.map((Q)=>v[Q]).filter(Boolean).join("; ");return{text:z,styles:J||void 0}}}class M extends b{constructor(q,z){super(q,z);this.initializeStream()}initializeStream(){X("%c[STREAM STARTED]","color: #00ff00; font-weight: bold")}updateStream(q){X(`%c[STREAM UPDATE] ${q||"[STREAM UPDATE]"}`,"color: #00aaff")}finalizeStream(q,z){switch(q){case"start":X(`%c[STREAM STARTED] ${z}`,"color: #00ff00; font-weight: bold");break;case"stop":X(`%c[STREAM STOPPED] ${z}`,"color: #ff8800; font-weight: bold");break;case"succeed":X(`%c✓ [STREAM SUCCESS] ${z}`,"color: #00ff00; font-weight: bold");break;case"fail":X(`%c✗ [STREAM FAILED] ${z}`,"color: #ff0000; font-weight: bold");break}}prefix(q,z){return this._prefix=q,z&&(this._prefixStyles=z),X(`%c[PREFIX SET: ${q}]`,"color: #888; font-style: italic;"),this}decorateText(q,z){let J=q||"";if(J)J=J.replace(/\[\[(.+?)\]\]/g,"$1");return this.getStyledText(z,J).text}printOutput(q){X(q)}printDivider(q,z){let{styles:J}=this.getStyledText(z,q);if(J)X(`%c${q}`,J);else X(q)}toStream(q,z){if(q||z)return new M(q,z);return this}getStyledText(q=[],z){let J=q.map((Q)=>v[Q]).filter(Boolean).join("; ");return{text:z,styles:J||void 0}}}class E{static createLogger(q){if(_)return new V(q);else if(j)return new $(q);else return new $(q)}static createStreamLogger(q,z){if(_)return new M(q,z);else if(j)return new A(q,z);else return new A(q,z)}static getLoggerInstance(q,z){if(_)return V.getLoggerInstance(q,z);else if(j)return $.getLoggerInstance(q,z);else return $.getLoggerInstance(q,z)}static type(q,z){if(_)return V.type(q,z);else if(j)return $.type(q,z);else return $.type(q,z)}static get stream(){return this.createStreamLogger()}static get plain(){return this.getLoggerInstance("plain")}static get info(){return this.getLoggerInstance("info")}static get warn(){return this.getLoggerInstance("warn")}static get error(){return this.getLoggerInstance("error")}static get debug(){return this.getLoggerInstance("debug")}static get success(){return this.getLoggerInstance("success")}static get failure(){return this.getLoggerInstance("failure")}}class Z{_instance;static stylesMap=E.getLoggerInstance("info").constructor.stylesMap;static[Symbol.hasInstance]=(q)=>{return q&&typeof q==="object"&&q._isShermanLogger===!0};constructor(q){return this._instance=E.createLogger(q),new Proxy(this,{get(z,J,Q){if(J in z._instance){let W=z._instance[J];if(typeof W==="function")return W.bind(z._instance);return W}return Reflect.get(z,J,Q)},set(z,J,Q,W){if(J in z._instance)return z._instance[J]=Q,!0;return Reflect.set(z,J,Q,W)}})}static getLoggerInstance(q,z){return E.getLoggerInstance(q,z)}static type(q,z){return E.type(q,z)}static get stream(){return E.stream}static get plain(){return E.plain}static get info(){return E.info}static get warn(){return E.warn}static get error(){return E.error}static get debug(){return E.debug}static get success(){return E.success}static get failure(){return E.failure}}class C{_instance;constructor(q,z){return this._instance=E.createStreamLogger(q,z),new Proxy(this,{get(J,Q,W){if(Q in J._instance){let Y=J._instance[Q];if(typeof Y==="function")return Y.bind(J._instance);return Y}return Reflect.get(J,Q,W)},set(J,Q,W,Y){if(Q in J._instance)return J._instance[Q]=W,!0;return Reflect.set(J,Q,W,Y)}})}static create(q,z){return E.createStreamLogger(q,z)}}var O=new Proxy(Z,{get(q,z,J){if(!(z in q)){try{if((Z.getLoggerInstance("info").constructor.registeredTypes||[]).includes(z))return Z.getLoggerInstance(z)}catch{}return new Proxy(function(...W){let[Y,U]=[z,W[0]];if(U&&Array.isArray(U))return Z.type(Y,U),Z.getLoggerInstance(Y,U);else throw new TypeError("Invalid arguments for adding a new logger getter.")},{get(W,Y,U){try{if((Z.getLoggerInstance("info").constructor.registeredTypes||[]).includes(z)){let P=Z.getLoggerInstance(z);if(Y in P){let F=Reflect.get(P,Y);return typeof F==="function"?F.bind(P):F}}}catch{}return Reflect.get(W,Y,U)}})}return Reflect.get(q,z,J)},ownKeys(q){let z=Reflect.ownKeys(q);try{let Q=Z.getLoggerInstance("info").constructor.registeredTypes||[];return[...z,...Q]}catch{return z}},has(q,z){if(Reflect.has(q,z))return!0;try{return(Z.getLoggerInstance("info").constructor.registeredTypes||[]).includes(z)}catch{return!1}},getOwnPropertyDescriptor(q,z){if(Reflect.has(q,z))return Reflect.getOwnPropertyDescriptor(q,z);try{if((Z.getLoggerInstance("info").constructor.registeredTypes||[]).includes(z))return{enumerable:!0,configurable:!0,value:Z.getLoggerInstance(z)}}catch{}return}});function u(){return O}function c(q){return Z.plain.text(q)}var n=new Proxy(c,{get:(q,z)=>{if(z in Z||z in O)return Reflect.get(O,z);return Reflect.get(q,z)},ownKeys:(q)=>{let z=Reflect.ownKeys(q),J=Reflect.ownKeys(O);return[...new Set([...z,...J])]},has:(q,z)=>{return Reflect.has(q,z)||Reflect.has(O,z)}});export{R as safeNavigator,n as logger,j as isNode,_ as isBrowser,u as createLogger,C as StreamLogger,Z as Logger};
