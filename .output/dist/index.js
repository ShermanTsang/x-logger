import{createRequire as c}from"node:module";var N=Object.create;var{getPrototypeOf:v,defineProperty:w,getOwnPropertyNames:C}=Object;var m=Object.prototype.hasOwnProperty;var F=(b,W,Y)=>{Y=b!=null?N(v(b)):{};let G=W||!b||!b.__esModule?w(Y,"default",{value:b,enumerable:!0}):Y;for(let q of C(b))if(!m.call(G,q))w(G,q,{get:()=>b[q],enumerable:!0});return G};var d=c(import.meta.url);var _=typeof globalThis!=="undefined"&&typeof globalThis.window!=="undefined"&&typeof globalThis.document!=="undefined",K=typeof globalThis!=="undefined"&&typeof globalThis.process!=="undefined"&&globalThis.process?.versions?.node&&!_;function h(b){return new Promise((W)=>setTimeout(W,b))}var E={getUserAgent(){try{let b=E.safeNavigatorProperty("userAgent");return b&&typeof b==="string"?b:"Unknown UserAgent"}catch{return"Unknown UserAgent"}},hasStorageAPI(){try{let b=E.safeNavigatorProperty("storage");return b!==null&&typeof b==="object"&&typeof b.estimate==="function"}catch{return!1}},async getStorageEstimate(){try{if(E.hasStorageAPI()){let b=E.safeNavigatorProperty("storage");if(b&&typeof b.estimate==="function")return await b.estimate()}return null}catch{return null}},isAvailable(){try{return typeof navigator!=="undefined"&&navigator!==null}catch{return!1}},safeNavigatorProperty(b){try{if(!E.isAvailable())return null;if(Object.prototype.hasOwnProperty.call(navigator,b))return navigator[b];return null}catch{return null}},getEnhancedUserAgent(){try{return E.getUserAgent()}catch{return E.getUserAgent()}},isMobile(){try{let b=E.getUserAgent();if(b==="Unknown UserAgent")return!1;return/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Windows Phone/i.test(b)}catch{return!1}},getEnvironmentInfo(){return{isNavigatorAvailable:E.isAvailable(),hasStorageAPI:E.hasStorageAPI(),isMobile:E.isMobile(),userAgent:E.getEnhancedUserAgent()}}};class I{static[Symbol.hasInstance]=(b)=>{return b&&typeof b==="object"&&b._isShermanLogger===!0};static registeredTypes=[];_text=null;_textStyles=[];_detail=null;_detailStyles=[];_prefix=null;_prefixStyles=[];_data;_displayTime=!1;_loggerType="normal";_prependDivider=!1;_prependDividerStyles=[];_prependDividerLength=1;_prependDividerChar="-";_appendDivider=!1;_appendDividerStyles=[];_appendDividerChar="-";_appendDividerLength=1;_singleDivider=!1;_singleDividerStyles=[];_singleDividerChar="-";_singleDividerLength=1;_isVisible=!0;constructor(b){b&&(this._prefixStyles=b),this._isShermanLogger=!0}static stylesMap={info:["blueBright","underline"],warn:["bgYellowBright"],error:["bgRedBright"],debug:["bgCyanBright"],success:["bgGreenBright"],failure:["bgRedBright"],plain:["white"]};setDividerProperties(b,W="-",Y=40,G=["gray"]){let q=b==="prepend"?"_prependDivider":b==="append"?"_appendDivider":"_singleDivider";this[`${q}`]=!0,this[`${q}Char`]=W||this[`${q}Char`],this[`${q}Styles`]=G||this[`${q}Styles`],this[`${q}Length`]=Y||(W&&W.length===1?40:this[`${q}Length`])}divider(b,W,Y){this.setDividerProperties("single",b,W,Y),this.print()}styles(b){return this._textStyles=b,this}prependDivider(b,W,Y){return this.setDividerProperties("prepend",b,W,Y),this}appendDivider(b,W,Y){return this.setDividerProperties("append",b,W,Y),this}time(b=!0){return this._displayTime=b,this}get formattedTime(){return this._displayTime?`${new Date().toLocaleTimeString()} `:""}text(b,W){return this._text=b,W&&(this._textStyles=W),this}get formattedText(){return this._text?`${this.decorateText(this._text,this._textStyles)} `:""}detail(b,W){return this._detail=b,W&&(this._detailStyles=W),this}get formattedDetail(){return this._detail?`
${this.decorateText(this._detail,this._detailStyles)}`:""}prefix(b,W){return this._prefix=b,W&&(this._prefixStyles=W),this}get formattedPrefix(){return this._prefix?`${this.decorateText(this._prefix,this._prefixStyles)} `:""}data(b){return this._data=b,this}get formattedData(){return this._data?`
${this._data}`:""}composeMainOutput(){if(this.formattedTime||this.formattedText||this.formattedDetail||this.formattedData||this._loggerType==="normal"&&this.formattedPrefix)return`${this.formattedTime}${this._loggerType==="normal"?this.formattedPrefix:""}${this.formattedText}${this.formattedDetail}${this.formattedData}`;return""}print(b=!0){if(this._isVisible=b,!this._isVisible)return;if(this._singleDivider){let Y=this._singleDividerChar.repeat(this._singleDividerLength);this.printDivider(Y,this._singleDividerStyles);return}if(this._prependDivider){let Y=this._prependDividerChar.repeat(this._prependDividerLength);this.printDivider(Y,this._prependDividerStyles)}let W=this.composeMainOutput();if(W)this.printOutput(W);if(this._appendDivider){let Y=this._appendDividerChar.repeat(this._appendDividerLength);this.printDivider(Y,this._appendDividerStyles)}}capitalize(b){return b.charAt(0).toUpperCase()+b.slice(1)}get[Symbol.toStringTag](){return"ShermanLoggerClass"}toString(){return this.composeMainOutput().toString()}toObject(){return this}}class T extends I{_state=void 0;_delay=0;constructor(b,W){super(W||[]);this._loggerType="stream",this._state="start",b&&this.prefix(b,W)}text(b="",W){return this._text=b,W&&(this._textStyles=W),this}detail(b="",W){return this._detail=b,W&&(this._detailStyles=W),this}delay(b){return this._delay=b,this}state(b){return this._state=b,this.update(),this}update(){if(this._state)this.updateState(this._state);else{let b=this.composeMainOutput();this.updateStream(b)}}async asyncUpdate(b){this.update();let W=this._delay||b;if(W)await h(W),this._delay&&(this._delay=0)}updateState(b){let W=this.composeMainOutput();this.finalizeStream(b,W),this._state=void 0}}function z(...b){try{if(typeof console!=="undefined"&&console&&typeof console.log==="function")console.log(...b)}catch(W){}}var Z=null,D=null;async function S(){if(!Z)try{let[b,W]=await Promise.all([import("chalk"),import("ora")]);Z=b.default,D=W.default}catch(b){z("Failed to load Node.js modules:",b)}}S();class R extends I{constructor(b){super(b)}static getLoggerInstance(b,W){return W&&(R.stylesMap[b]=W),new this(R.stylesMap[b])}static type(b,W){if(b in R&&W)if(Z)z(Z.yellow.underline(`Logger type "${String(b)}" is preset. Add custom getter will override the preset.`));else z(`Logger type "${String(b)}" is preset. Add custom getter will override the preset.`);if(W){if(R.stylesMap[b]=W,!R.registeredTypes.includes(String(b)))R.registeredTypes.push(String(b))}let Y=R.getLoggerInstance(b,W);return Object.defineProperty(R,b,{get(){return Y},configurable:!0,enumerable:!0}),Y}static get stream(){return new j}static get plain(){return this.getLoggerInstance("plain")}static get info(){return this.getLoggerInstance("info")}static get warn(){return this.getLoggerInstance("warn")}static get error(){return this.getLoggerInstance("error")}static get debug(){return this.getLoggerInstance("debug")}static get success(){return this.getLoggerInstance("success")}static get failure(){return this.getLoggerInstance("failure")}decorateText(b,W){let Y=b||"";if(Y)if(Z)Y=Y.replace(/\[\[(.+?)\]\]/g,Z.underline.yellow("$1"));else Y=Y.replace(/\[\[(.+?)\]\]/g,"$1");return this.getStyledChalkInstance(W,Y)}printOutput(b){z(b)}printDivider(b,W){z(this.getStyledChalkInstance(W,b))}toStream(b,W){let Y=new j(b,W);if(this._text)Y.text(this._text,this._textStyles);if(this._detail)Y.detail(this._detail,this._detailStyles);if(this._data)Y.data(this._data);return Y}getStyledChalkInstance(b=[],W){if(Z)return b.reduce((Y,G)=>{if(G in Z)return Z[G](Y);return Y},W);return W}}class j extends T{_spinner=void 0;constructor(b,W){super(b,W);this.initializeStream()}initializeStream(){if(D)this._spinner=D(),this._spinner?.start();else this._spinner=void 0,z("[STREAM STARTED]")}updateStream(b){if(this._spinner)this._spinner.text=b;else z(`[STREAM UPDATE] ${b||"[STREAM UPDATE]"}`)}finalizeStream(b,W){if(this._spinner)switch(b){case"start":this._spinner.start(W);break;case"stop":this._spinner.stop(),this._spinner=void 0;break;case"succeed":this._spinner.succeed(W),this._spinner=void 0;break;case"fail":this._spinner.fail(W),this._spinner=void 0;break}else switch(b){case"start":z(`[STREAM STARTED] ${W}`);break;case"stop":z(`[STREAM STOPPED] ${W}`);break;case"succeed":z(`✓ [STREAM SUCCESS] ${W}`);break;case"fail":z(`✗ [STREAM FAILED] ${W}`);break}}prefix(b,W){if(this._prefix=b,W&&(this._prefixStyles=W),this._spinner)this._spinner.prefixText=this.decorateText(this._prefix,this._prefixStyles);return this}decorateText(b,W){let Y=b||"";if(Y)if(Z)Y=Y.replace(/\[\[(.+?)\]\]/g,Z.underline.yellow("$1"));else Y=Y.replace(/\[\[(.+?)\]\]/g,"$1");return this.getStyledChalkInstance(W,Y)}printOutput(b){z(b)}printDivider(b,W){z(this.getStyledChalkInstance(W,b))}toStream(b,W){if(b||W)return new j(b,W);return this}getStyledChalkInstance(b=[],W){if(Z)return b.reduce((Y,G)=>{if(G in Z)return Z[G](Y);return Y},W);return W}}var B={black:"color: #000000",red:"color: #ff0000",green:"color: #008000",yellow:"color: #ffff00",blue:"color: #0000ff",magenta:"color: #ff00ff",cyan:"color: #00ffff",white:"color: #ffffff",gray:"color: #808080",grey:"color: #808080",redBright:"color: #ff5555",greenBright:"color: #55ff55",yellowBright:"color: #ffff55",blueBright:"color: #5555ff",magentaBright:"color: #ff55ff",cyanBright:"color: #55ffff",whiteBright:"color: #ffffff",bgBlack:"background-color: #000000; color: #ffffff",bgRed:"background-color: #ff0000; color: #ffffff",bgGreen:"background-color: #008000; color: #ffffff",bgYellow:"background-color: #ffff00; color: #000000",bgBlue:"background-color: #0000ff; color: #ffffff",bgMagenta:"background-color: #ff00ff; color: #ffffff",bgCyan:"background-color: #00ffff; color: #000000",bgWhite:"background-color: #ffffff; color: #000000",bgRedBright:"background-color: #ff5555; color: #ffffff; padding: 2px 4px; border-radius: 3px",bgGreenBright:"background-color: #55ff55; color: #000000; padding: 2px 4px; border-radius: 3px",bgYellowBright:"background-color: #ffff55; color: #000000; padding: 2px 4px; border-radius: 3px",bgBlueBright:"background-color: #5555ff; color: #ffffff; padding: 2px 4px; border-radius: 3px",bgMagentaBright:"background-color: #ff55ff; color: #ffffff; padding: 2px 4px; border-radius: 3px",bgCyanBright:"background-color: #55ffff; color: #000000; padding: 2px 4px; border-radius: 3px",bgWhiteBright:"background-color: #ffffff; color: #000000; padding: 2px 4px; border-radius: 3px",bold:"font-weight: bold",dim:"opacity: 0.5",italic:"font-style: italic",underline:"text-decoration: underline",strikethrough:"text-decoration: line-through"};class U extends I{constructor(b){super(b)}static getLoggerInstance(b,W){return W&&(U.stylesMap[b]=W),new this(U.stylesMap[b])}static type(b,W){if(b in U&&W)z(`%cLogger type "${String(b)}" is preset. Add custom getter will override the preset.`,"color: #ffff00; text-decoration: underline");if(W){if(U.stylesMap[b]=W,!U.registeredTypes.includes(String(b)))U.registeredTypes.push(String(b))}let Y=U.getLoggerInstance(b,W);return Object.defineProperty(U,b,{get(){return Y},configurable:!0,enumerable:!0}),Y}static get stream(){return new M}static get plain(){return this.getLoggerInstance("plain")}static get info(){return this.getLoggerInstance("info")}static get warn(){return this.getLoggerInstance("warn")}static get error(){return this.getLoggerInstance("error")}static get debug(){return this.getLoggerInstance("debug")}static get success(){return this.getLoggerInstance("success")}static get failure(){return this.getLoggerInstance("failure")}toStream(b,W){let Y=new M(b,W);if(this._text)Y.text(this._text,this._textStyles);if(this._detail)Y.detail(this._detail,this._detailStyles);if(this._data)Y.data(this._data);return Y}decorateText(b,W){let Y=b||"";if(Y)Y=Y.replace(/\[\[(.+?)\]\]/g,"$1");return this.getStyledText(W,Y).text}printOutput(b){if(!b)return;let W=b.includes("[[")&&b.includes("]]"),Y=b.match(/^\d{1,2}:\d{2}:\d{2}(?:\s[AP]M)?\s/);if(W||Y||this._prefixStyles.length>0||this._textStyles.length>0){let G=[],q=[],J=b;if(Y&&this._displayTime)G.push(`%c${Y[0]}`),q.push("color: #888; font-size: 0.9em"),J=J.substring(Y[0].length);if(this._prefix&&this._loggerType==="normal"){let{styles:$}=this.getStyledText(this._prefixStyles,`${this._prefix} `);if($)G.push(`%c${this._prefix} `),q.push($);else G.push(`${this._prefix} `);J=J.replace(`${this._prefix} `,"")}if(W)J.split(/(\[\[.+?\]\])/).forEach((V)=>{if(V.match(/\[\[.+?\]\]/)){let H=V.replace(/\[\[(.+?)\]\]/g,"$1");G.push(`%c${H}`),q.push("text-decoration: underline; color: #ffff00; font-weight: bold")}else if(V.trim()){let{styles:H}=this.getStyledText(this._textStyles,V);if(H)G.push(`%c${V}`),q.push(H);else G.push(V)}});else if(J){let{styles:$}=this.getStyledText(this._textStyles,J);if($)G.push(`%c${J}`),q.push($);else G.push(J)}if(G.length>0)z(G.join(""),...q)}else z(b)}printDivider(b,W){let{styles:Y}=this.getStyledText(W,b);if(Y)z(`%c${b}`,Y);else z(b)}getStyledText(b=[],W){let Y=b.map((G)=>B[G]).filter(Boolean).join("; ");return{text:W,styles:Y||void 0}}}class M extends T{constructor(b,W){super(b,W);this.initializeStream()}initializeStream(){z("%c[STREAM STARTED]","color: #00ff00; font-weight: bold")}updateStream(b){z(`%c[STREAM UPDATE] ${b||"[STREAM UPDATE]"}`,"color: #00aaff")}finalizeStream(b,W){switch(b){case"start":z(`%c[STREAM STARTED] ${W}`,"color: #00ff00; font-weight: bold");break;case"stop":z(`%c[STREAM STOPPED] ${W}`,"color: #ff8800; font-weight: bold");break;case"succeed":z(`%c✓ [STREAM SUCCESS] ${W}`,"color: #00ff00; font-weight: bold");break;case"fail":z(`%c✗ [STREAM FAILED] ${W}`,"color: #ff0000; font-weight: bold");break}}prefix(b,W){return this._prefix=b,W&&(this._prefixStyles=W),z(`%c[PREFIX SET: ${b}]`,"color: #888; font-style: italic;"),this}decorateText(b,W){let Y=b||"";if(Y)Y=Y.replace(/\[\[(.+?)\]\]/g,"$1");return this.getStyledText(W,Y).text}printOutput(b){z(b)}printDivider(b,W){let{styles:Y}=this.getStyledText(W,b);if(Y)z(`%c${b}`,Y);else z(b)}toStream(b,W){if(b||W)return new M(b,W);return this}getStyledText(b=[],W){let Y=b.map((G)=>B[G]).filter(Boolean).join("; ");return{text:W,styles:Y||void 0}}}class X{static createLogger(b){if(_)return new U(b);else if(K)return new R(b);else return new R(b)}static createStreamLogger(b,W){if(_)return new M(b,W);else if(K)return new j(b,W);else return new j(b,W)}static getLoggerInstance(b,W){if(_)return U.getLoggerInstance(b,W);else if(K)return R.getLoggerInstance(b,W);else return R.getLoggerInstance(b,W)}static type(b,W){if(_)return U.type(b,W);else if(K)return R.type(b,W);else return R.type(b,W)}static get stream(){return this.createStreamLogger()}static get plain(){return this.getLoggerInstance("plain")}static get info(){return this.getLoggerInstance("info")}static get warn(){return this.getLoggerInstance("warn")}static get error(){return this.getLoggerInstance("error")}static get debug(){return this.getLoggerInstance("debug")}static get success(){return this.getLoggerInstance("success")}static get failure(){return this.getLoggerInstance("failure")}}class P{_instance;static stylesMap=X.getLoggerInstance("info").constructor.stylesMap;static[Symbol.hasInstance]=(b)=>{return b&&typeof b==="object"&&b._isShermanLogger===!0};constructor(b){return this._instance=X.createLogger(b),new Proxy(this,{get(W,Y,G){if(Y in W._instance){let q=W._instance[Y];if(typeof q==="function")return q.bind(W._instance);return q}return Reflect.get(W,Y,G)},set(W,Y,G,q){if(Y in W._instance)return W._instance[Y]=G,!0;return Reflect.set(W,Y,G,q)}})}static getLoggerInstance(b,W){return X.getLoggerInstance(b,W)}static type(b,W){return X.type(b,W)}static get stream(){return X.stream}static get plain(){return X.plain}static get info(){return X.info}static get warn(){return X.warn}static get error(){return X.error}static get debug(){return X.debug}static get success(){return X.success}static get failure(){return X.failure}}class f{_instance;constructor(b,W){return this._instance=X.createStreamLogger(b,W),new Proxy(this,{get(Y,G,q){if(G in Y._instance){let J=Y._instance[G];if(typeof J==="function")return J.bind(Y._instance);return J}return Reflect.get(Y,G,q)},set(Y,G,q,J){if(G in Y._instance)return Y._instance[G]=q,!0;return Reflect.set(Y,G,q,J)}})}static create(b,W){return X.createStreamLogger(b,W)}}var Q=P,x=f;var A=new Proxy(Q,{get(b,W,Y){if(!(W in b)){try{if((Q.getLoggerInstance("info").constructor.registeredTypes||[]).includes(W))return Q.getLoggerInstance(W)}catch{}return new Proxy(function(...q){let[J,$]=[W,q[0]];if($&&Array.isArray($))return Q.type(J,$),Q.getLoggerInstance(J,$);else throw new TypeError("Invalid arguments for adding a new logger getter.")},{get(q,J,$){try{if((Q.getLoggerInstance("info").constructor.registeredTypes||[]).includes(W)){let k=Q.getLoggerInstance(W);if(J in k){let O=Reflect.get(k,J);return typeof O==="function"?O.bind(k):O}}}catch{}return Reflect.get(q,J,$)}})}return Reflect.get(b,W,Y)},ownKeys(b){let W=Reflect.ownKeys(b);try{let G=Q.getLoggerInstance("info").constructor.registeredTypes||[];return[...W,...G]}catch{return W}},has(b,W){if(Reflect.has(b,W))return!0;try{return(Q.getLoggerInstance("info").constructor.registeredTypes||[]).includes(W)}catch{return!1}},getOwnPropertyDescriptor(b,W){if(Reflect.has(b,W))return Reflect.getOwnPropertyDescriptor(b,W);try{if((Q.getLoggerInstance("info").constructor.registeredTypes||[]).includes(W))return{enumerable:!0,configurable:!0,value:Q.getLoggerInstance(W)}}catch{}return}});function L(){return A}function u(b){return Q.plain.text(b)}var n=new Proxy(u,{get:(b,W)=>{if(W in Q||W in A)return Reflect.get(A,W);return Reflect.get(b,W)},ownKeys:(b)=>{let W=Reflect.ownKeys(b),Y=Reflect.ownKeys(A);return[...new Set([...W,...Y])]},has:(b,W)=>{return Reflect.has(b,W)||Reflect.has(A,W)}});export{E as safeNavigator,n as logger,K as isNode,_ as isBrowser,L as createLogger,x as StreamLogger,Q as Logger};
