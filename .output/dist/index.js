import{createRequire as w}from"node:module";var N=Object.create;var{getPrototypeOf:D,defineProperty:T,getOwnPropertyNames:I}=Object;var O=Object.prototype.hasOwnProperty;var v=(R,E,K)=>{K=R!=null?N(D(R)):{};let j=E||!R||!R.__esModule?T(K,"default",{value:R,enumerable:!0}):K;for(let z of I(R))if(!O.call(j,z))T(j,z,{get:()=>R[z],enumerable:!0});return j};var H=w(import.meta.url);var A=typeof globalThis!=="undefined"&&typeof globalThis.window!=="undefined"&&typeof globalThis.document!=="undefined",U=typeof globalThis!=="undefined"&&typeof globalThis.process!=="undefined"&&globalThis.process?.versions?.node&&!A,B={black:"color: #000000",red:"color: #ff0000",green:"color: #008000",yellow:"color: #ffff00",blue:"color: #0000ff",magenta:"color: #ff00ff",cyan:"color: #00ffff",white:"color: #ffffff",gray:"color: #808080",grey:"color: #808080",redBright:"color: #ff5555",greenBright:"color: #55ff55",yellowBright:"color: #ffff55",blueBright:"color: #5555ff",magentaBright:"color: #ff55ff",cyanBright:"color: #55ffff",whiteBright:"color: #ffffff",bgBlack:"background-color: #000000; color: #ffffff",bgRed:"background-color: #ff0000; color: #ffffff",bgGreen:"background-color: #008000; color: #ffffff",bgYellow:"background-color: #ffff00; color: #000000",bgBlue:"background-color: #0000ff; color: #ffffff",bgMagenta:"background-color: #ff00ff; color: #ffffff",bgCyan:"background-color: #00ffff; color: #000000",bgWhite:"background-color: #ffffff; color: #000000",bgRedBright:"background-color: #ff5555; color: #ffffff; padding: 2px 4px; border-radius: 3px",bgGreenBright:"background-color: #55ff55; color: #000000; padding: 2px 4px; border-radius: 3px",bgYellowBright:"background-color: #ffff55; color: #000000; padding: 2px 4px; border-radius: 3px",bgBlueBright:"background-color: #5555ff; color: #ffffff; padding: 2px 4px; border-radius: 3px",bgMagentaBright:"background-color: #ff55ff; color: #ffffff; padding: 2px 4px; border-radius: 3px",bgCyanBright:"background-color: #55ffff; color: #000000; padding: 2px 4px; border-radius: 3px",bgWhiteBright:"background-color: #ffffff; color: #000000; padding: 2px 4px; border-radius: 3px",bold:"font-weight: bold",dim:"opacity: 0.5",italic:"font-style: italic",underline:"text-decoration: underline",strikethrough:"text-decoration: line-through"},Q=null;async function m(){if(!Q&&U&&!A)try{Q=(await import("chalk")).default}catch(R){if(U)q("Failed to load chalk:",R)}return Q}function X(R=[],E){if(A){let K=R.map((j)=>B[j]).filter(Boolean).join("; ");return{text:E,styles:K||void 0}}else{if(Q)return{text:R.reduce((j,z)=>{if(z in Q)return Q[z](j);return j},E)};return{text:E}}}function q(...R){try{if(typeof console!=="undefined"&&console&&typeof console.log==="function")console.log(...R)}catch(E){}}function W(R,E){if(A&&E&&E.length>0){let{text:K,styles:j}=X(E,R);if(j)q(`%c${K}`,j);else q(K)}else if(!A&&Q){let{text:K}=X(E,R);q(K)}else q(R)}if(U&&!A)m();function M(R){return new Promise((E)=>setTimeout(E,R))}var J=null,b=null;async function k(){if(U&&!A&&!J)try{let[R,E]=await Promise.all([import("chalk"),import("ora")]);J=R.default,b=E.default}catch(R){if(U&&!A)q("Failed to load Node.js modules:",R)}}if(U&&!A)k();function V(R=[],E){if(A){let{text:K}=X(R,E);return K}else if(J)return R.reduce((K,j)=>{if(j in J)return J[j](K);return K},E);return E}class F{_text=null;_textStyles=[];_detail=null;_detailStyles=[];_prefix=null;_prefixStyles=[];_data;_displayTime=!1;_loggerType="normal";_prependDivider=!1;_prependDividerStyles=[];_prependDividerLength=1;_prependDividerChar="-";_appendDivider=!1;_appendDividerStyles=[];_appendDividerChar="-";_appendDividerLength=1;_singleDivider=!1;_singleDividerStyles=[];_singleDividerChar="-";_singleDividerLength=1;_isVisible=!0;constructor(R){R&&(this._prefixStyles=R)}static stylesMap={info:["blueBright","underline"],warn:["bgYellowBright"],error:["bgRedBright"],debug:["bgCyanBright"],success:["bgGreenBright"],failure:["bgRedBright"],plain:["white"]};static getLoggerInstance(R,E){return E&&(F.stylesMap[R]=E),new this(F.stylesMap[R])}static type(R,E){if(R in F&&E)if(A)q(`%cLogger type "${String(R)}" is preset. Add custom getter will override the preset.`,"color: #ffff00; text-decoration: underline");else if(J)q(J.yellow.underline(`Logger type "${String(R)}" is preset. Add custom getter will override the preset.`));else q(`Logger type "${String(R)}" is preset. Add custom getter will override the preset.`);let K=F.getLoggerInstance(R,E);return Object.defineProperty(F,R,{get(){return K},configurable:!0,enumerable:!0}),K}static get stream(){return new _}toStream(R,E){let K=new _(R,E);if(this._text)K.text(this._text,this._textStyles);if(this._detail)K.detail(this._detail,this._detailStyles);if(this._data)K.data(this._data);return K}static get plain(){return this.getLoggerInstance("plain")}static get info(){return this.getLoggerInstance("info")}static get warn(){return this.getLoggerInstance("warn")}static get error(){return this.getLoggerInstance("error")}static get debug(){return this.getLoggerInstance("debug")}static get success(){return this.getLoggerInstance("success")}static get failure(){return this.getLoggerInstance("failure")}setDividerProperties(R,E="-",K=40,j=["gray"]){let z=R==="prepend"?"_prependDivider":R==="append"?"_appendDivider":"_singleDivider";this[`${z}`]=!0,this[`${z}Char`]=E||this[`${z}Char`],this[`${z}Styles`]=j||this[`${z}Styles`],this[`${z}Length`]=K||(E&&E.length===1?40:this[`${z}Length`])}divider(R,E,K){this.setDividerProperties("single",R,E,K),this.print()}styles(R){return this._textStyles=R,this}prependDivider(R,E,K){return this.setDividerProperties("prepend",R,E,K),this}appendDivider(R,E,K){return this.setDividerProperties("append",R,E,K),this}time(R=!0){return this._displayTime=R,this}get formattedTime(){return this._displayTime?`${new Date().toLocaleTimeString()} `:""}text(R,E){return this._text=R,E&&(this._textStyles=E),this}get formattedText(){return this._text?`${this.decorateText(this._text,this._textStyles)} `:""}detail(R,E){return this._detail=R,E&&(this._detailStyles=E),this}get formattedDetail(){return this._detail?`
${this.decorateText(this._detail,this._detailStyles)}`:""}prefix(R,E){return this._prefix=R,E&&(this._prefixStyles=E),this}get formattedPrefix(){return this._prefix?`${this.decorateText(this._prefix,this._prefixStyles)} `:""}data(R){return this._data=R,this}get formattedData(){return this._data?`
${this._data}`:""}decorateText(R,E){let K=R||"";if(K)if(A)K=K.replace(/\[\[(.+?)\]\]/g,"$1");else if(J)K=K.replace(/\[\[(.+?)\]\]/g,J.underline.yellow("$1"));else K=K.replace(/\[\[(.+?)\]\]/g,"$1");return V(E,K)}composeMainOutput(){if(this.formattedTime||this.formattedText||this.formattedDetail||this.formattedData||this._loggerType==="normal"&&this.formattedPrefix)return`${this.formattedTime}${this._loggerType==="normal"?this.formattedPrefix:""}${this.formattedText}${this.formattedDetail}${this.formattedData}`;return""}print(R=!0){if(this._isVisible=R,!this._isVisible)return;if(this._singleDivider){let K=this._singleDividerChar.repeat(this._singleDividerLength);if(A)W(K,this._singleDividerStyles);else q(V(this._singleDividerStyles,K));return}if(this._prependDivider){let K=this._prependDividerChar.repeat(this._prependDividerLength);if(A)W(K,this._prependDividerStyles);else q(V(this._prependDividerStyles,K))}let E=this.composeMainOutput();if(A)this.printBrowserOutput(E);else q(E);if(this._appendDivider){let K=this._appendDividerChar.repeat(this._appendDividerLength);if(A)W(K,this._appendDividerStyles);else q(V(this._appendDividerStyles,K))}}printBrowserOutput(R){if(!R)return;let E=R.includes("[[")&&R.includes("]]"),K=R.match(/^\d{1,2}:\d{2}:\d{2}(?:\s[AP]M)?\s/);if(E||K||this._prefixStyles.length>0||this._textStyles.length>0){let j=[],z=[],G=R;if(K&&this._displayTime)j.push(`%c${K[0]}`),z.push("color: #888; font-size: 0.9em"),G=G.substring(K[0].length);if(this._prefix&&this._loggerType==="normal"){let{styles:Y}=X(this._prefixStyles,`${this._prefix} `);if(Y)j.push(`%c${this._prefix} `),z.push(Y);else j.push(`${this._prefix} `);G=G.replace(`${this._prefix} `,"")}if(E)G.split(/(\[\[.+?\]\])/).forEach((Z)=>{if(Z.match(/\[\[.+?\]\]/)){let $=Z.replace(/\[\[(.+?)\]\]/g,"$1");j.push(`%c${$}`),z.push("text-decoration: underline; color: #ffff00; font-weight: bold")}else if(Z.trim()){let{styles:$}=X(this._textStyles,Z);if($)j.push(`%c${Z}`),z.push($);else j.push(Z)}});else if(G){let{styles:Y}=X(this._textStyles,G);if(Y)j.push(`%c${G}`),z.push(Y);else j.push(G)}if(j.length>0)q(j.join(""),...z)}else q(R)}capitalize(R){return R.charAt(0).toUpperCase()+R.slice(1)}get[Symbol.toStringTag](){return"ShermanLoggerClass"}toString(){return this.composeMainOutput().toString()}toObject(){return this}}class _ extends F{_state=void 0;_spinner=void 0;_delay=0;constructor(R,E){super(E||[]);if(this._loggerType="stream",A)this._spinner=void 0,q("%c[STREAM STARTED]","color: #00ff00; font-weight: bold");else if(b)this._spinner=b(),this._spinner?.start();else this._spinner=void 0,q("[STREAM STARTED]");return this._state="start",R&&this.prefix(R,E),this}prefix(R,E){if(this._prefix=R,E&&(this._prefixStyles=E),this._spinner)this._spinner.prefixText=this.decorateText(this._prefix,this._prefixStyles);else if(A)q(`%c[PREFIX SET: ${R}]`,"color: #888; font-style: italic;");return this}text(R="",E){return this._text=R,E&&(this._textStyles=E),this}detail(R="",E){return this._detail=R,E&&(this._detailStyles=E),this}delay(R){return this._delay=R,this}state(R){return this._state=R,this}update(){if(this._state)this.updateState(this._state);else if(this._spinner)this._spinner.text=this.composeMainOutput();else if(A){let R=this.composeMainOutput();if(R)q(`%c[STREAM UPDATE] ${R}`,"color: #00aaff")}}async asyncUpdate(R){this.update();let E=this._delay||R;if(E)await M(E),this._delay&&(this._delay=0)}updateState(R){let E=this.composeMainOutput();if(this._spinner)switch(R){case"start":this._spinner.start(E);break;case"stop":this._spinner.stop(),this._spinner=void 0;break;case"succeed":this._spinner.succeed(E),this._spinner=void 0;break;case"fail":this._spinner.fail(E),this._spinner=void 0;break}else if(A)switch(R){case"start":q(`%c[STREAM STARTED] ${E}`,"color: #00ff00; font-weight: bold");break;case"stop":q(`%c[STREAM STOPPED] ${E}`,"color: #ff8800; font-weight: bold");break;case"succeed":q(`%c✓ [STREAM SUCCESS] ${E}`,"color: #00ff00; font-weight: bold");break;case"fail":q(`%c✗ [STREAM FAILED] ${E}`,"color: #ff0000; font-weight: bold");break}else switch(R){case"start":q(`[STREAM STARTED] ${E}`);break;case"stop":q(`[STREAM STOPPED] ${E}`);break;case"succeed":q(`✓ [STREAM SUCCESS] ${E}`);break;case"fail":q(`✗ [STREAM FAILED] ${E}`);break}this._state=void 0}}var P=new Proxy(F,{get(R,E,K){if(!(E in R))return function(...j){let[z,G]=[E,j[0]];if(G&&typeof G==="object")return F.type(z,G),F.getLoggerInstance(z,G);else throw new TypeError("Invalid arguments for adding a new logger getter.")};return Reflect.get(R,E,K)}});function L(){return P}function S(R){return F.plain.text(R)}var d=new Proxy(S,{get:(R,E)=>{if(Reflect.ownKeys(F).includes(E))return P[E];return Reflect.get(R,E)}});export{d as logger,L as createLogger,_ as StreamLogger,F as Logger};
